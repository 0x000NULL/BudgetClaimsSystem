<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>General Settings - Budget Claims System</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header>
        <h1>Budget Claims System</h1>
        <nav>
            <a href="/dashboard">Dashboard</a>
            <a href="/claims">Claims</a>
            <a href="/reports">Reports</a>
            <a href="/help">Help</a>
        </nav>
    </header>
    
    <main>
        <h2>General Settings</h2>

        <!-- Debug output -->
        <% if (typeof dbSettings !== 'undefined') { %>
            <pre style="display: none;">
                <%= JSON.stringify(dbSettings, null, 2) %>
            </pre>
        <% } %>

        <!-- File Upload Settings -->
        <section>
            <h3>File Upload Settings</h3>
            
            <!-- Max File Sizes -->
            <div class="settings-group">
                <h4>Maximum File Sizes (MB)</h4>
                <form id="maxFileSizesForm">
                    <div class="form-group">
                        <label for="photoSize">Photos:</label>
                        <input type="number" id="photoSize" name="photos" min="1" max="50" 
                            value="<%= Math.floor((dbSettings?.fileSize?.settings?.photos || 5 * 1024 * 1024) / (1024 * 1024)) %>">
                    </div>
                    <div class="form-group">
                        <label for="documentSize">Documents:</label>
                        <input type="number" id="documentSize" name="documents" min="1" max="50" 
                            value="<%= Math.floor((dbSettings?.fileSize?.settings?.documents || 10 * 1024 * 1024) / (1024 * 1024)) %>">
                    </div>
                    <div class="form-group">
                        <label for="invoiceSize">Invoices:</label>
                        <input type="number" id="invoiceSize" name="invoices" min="1" max="50" 
                            value="<%= Math.floor((dbSettings?.fileSize?.settings?.invoices || 10 * 1024 * 1024) / (1024 * 1024)) %>">
                    </div>
                    <button type="submit" class="button">Update File Sizes</button>
                </form>
            </div>

            <!-- Max Files Per Category -->
            <div class="settings-group">
                <h4>Maximum Files Per Category</h4>
                <form id="maxFilesForm">
                    <div class="form-group">
                        <label for="photoCount">Photos:</label>
                        <input type="number" id="photoCount" name="photos" min="1" max="50" 
                            value="<%= dbSettings?.fileCount?.settings?.photos || 10 %>">
                    </div>
                    <div class="form-group">
                        <label for="documentCount">Documents:</label>
                        <input type="number" id="documentCount" name="documents" min="1" max="20" 
                            value="<%= dbSettings?.fileCount?.settings?.documents || 5 %>">
                    </div>
                    <div class="form-group">
                        <label for="invoiceCount">Invoices:</label>
                        <input type="number" id="invoiceCount" name="invoices" min="1" max="20" 
                            value="<%= dbSettings?.fileCount?.settings?.invoices || 5 %>">
                    </div>
                    <button type="submit" class="button">Update File Counts</button>
                </form>
            </div>
        </section>
    </main>

    <script src="/js/settings.js"></script>
</body>
</html>