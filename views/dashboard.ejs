<%- include('layout', { title: 'Dashboard - Budget Claims System' }) %>
<h2>Dashboard Analytics</h2>
<div class="stats">
    <p>Total Claims: <%= totalClaims %></p>
    <p>Open Claims: <%= openClaims %></p>
    <p>In Progress Claims: <%= inProgressClaims %></p>
    <p>Closed Claims: <%= closedClaims %></p>
    <p>Average Resolution Time: <%= avgResolutionTime %> days</p>
</div>
<canvas id="claimsChart"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('claimsChart').getContext('2d');
    const claimsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Open', 'In Progress', 'Closed'],
            datasets: [{
                label: 'Number of Claims',
                data: [<%= openClaims %>, <%= inProgressClaims %>, <%= closedClaims %>],
                backgroundColor: ['#ff6384', '#ffcd56', '#36a2eb'],
                borderColor: ['#ff6384', '#ffcd56', '#36a2eb'],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
