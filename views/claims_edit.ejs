<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Claim - Budget Claims System</title>
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        .btn {
            display: inline-block;
            padding: 8px 12px;
            margin: 5px;
            background-color: #007bff;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 4px;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .claim-info {
            margin-bottom: 20px;
        }

        .claim-info label {
            font-weight: bold;
        }

        .claim-info input, .claim-info textarea, .claim-info select {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .file-section {
            margin-bottom: 20px;
        }

        .file-section h3 {
            margin-bottom: 10px;
        }

        .file-section input {
            margin-bottom: 10px;
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            margin: 5px 0 15px 0;
        }

        .checkbox-group label {
            width: 50%;
            padding: 5px;
        }
    </style>
</head>
<body>
    <header>
        <img src="/images/Budget_logo.svg" alt="Budget Logo" class="logo">
        <h1>Budget Claims System</h1>
        <nav>
            <ul>
                <li><a href="/dashboard">Dashboard</a></li>
                <li><a href="/claims/search">Search Claims</a></li>
                <li><a href="/claims/add">Add Claim</a></li>
                <li><a href="/reports">Reports</a></li>
                <li><a href="/user-management">User Management</a></li>
                <li><a href="/help">Help</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="container">
            <h2>Edit Claim</h2>
            <form action="/claims/<%= claim._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                <div class="claim-info">
                    <label for="mva">MVA:</label>
                    <input type="text" id="mva" name="mva" value="<%= claim.mva %>" required>

                    <label for="customerName">Customer Name:</label>
                    <input type="text" id="customerName" name="customerName" value="<%= claim.customerName %>" required>

                    <label for="customerNumber">Customer Number:</label>
                    <input type="text" id="customerNumber" name="customerNumber" value="<%= claim.customerNumber %>">

                    <label for="customerEmail">Customer Email:</label>
                    <input type="email" id="customerEmail" name="customerEmail" value="<%= claim.customerEmail %>">

                    <label for="customerAddress">Customer Address:</label>
                    <input type="text" id="customerAddress" name="customerAddress" value="<%= claim.customerAddress %>">

                    <label for="customerDriversLicense">Customer Drivers License:</label>
                    <input type="text" id="customerDriversLicense" name="customerDriversLicense" value="<%= claim.customerDriversLicense %>">

                    <label for="carMake">Car Make:</label>
                    <input type="text" id="carMake" name="carMake" value="<%= claim.carMake %>">

                    <label for="carModel">Car Model:</label>
                    <input type="text" id="carModel" name="carModel" value="<%= claim.carModel %>">

                    <label for="carYear">Car Year:</label>
                    <input type="text" id="carYear" name="carYear" value="<%= claim.carYear %>">

                    <label for="carColor">Car Color:</label>
                    <input type="text" id="carColor" name="carColor" value="<%= claim.carColor %>">

                    <label for="carVIN">Car VIN:</label>
                    <input type="text" id="carVIN" name="carVIN" value="<%= claim.carVIN %>">

                    <label for="accidentDate">Accident Date:</label>
                    <input type="date" id="accidentDate" name="accidentDate" value="<%= claim.accidentDate ? new Date(claim.accidentDate).toISOString().split('T')[0] : '' %>">

                    <label for="billable">Billable:</label>
                    <select id="billable" name="billable">
                        <option value="true" <%= claim.billable ? 'selected' : '' %>>Yes</option>
                        <option value="false" <%= !claim.billable ? 'selected' : '' %>>No</option>
                    </select>

                    <label for="isRenterAtFault">Is Renter At Fault:</label>
                    <select id="isRenterAtFault" name="isRenterAtFault">
                        <option value="true" <%= claim.isRenterAtFault ? 'selected' : '' %>>Yes</option>
                        <option value="false" <%= !claim.isRenterAtFault ? 'selected' : '' %>>No</option>
                    </select>

                    <label for="damagesTotal">Damages Total:</label>
                    <input type="text" id="damagesTotal" name="damagesTotal" value="<%= claim.damagesTotal %>">

                    <label for="bodyShopName">Body Shop Name:</label>
                    <input type="text" id="bodyShopName" name="bodyShopName" value="<%= claim.bodyShopName %>">

                    <label for="raNumber">RA Number:</label>
                    <input type="text" id="raNumber" name="raNumber" value="<%= claim.raNumber %>">

                    <label for="insuranceCarrier">Insurance Carrier:</label>
                    <input type="text" id="insuranceCarrier" name="insuranceCarrier" value="<%= claim.insuranceCarrier %>">

                    <label for="insuranceAdjuster">Insurance Adjuster:</label>
                    <input type="text" id="insuranceAdjuster" name="insuranceAdjuster" value="<%= claim.insuranceAdjuster %>">

                    <label for="insuranceEmail">Insurance Email:</label>
                    <input type="text" id="insuranceEmail" name="insuranceEmail" value="<%= claim.insuranceEmail %>">

                    <label for="insurancePhoneNumber">Insurance Phone Number:</label>
                    <input type="text" id="insurancePhoneNumber" name="insurancePhoneNumber" value="<%= claim.insurancePhoneNumber %>">

                    <label for="insuranceFaxNumber">Insurance Fax Number:</label>
                    <input type="text" id="insuranceFaxNumber" name="insuranceFaxNumber" value="<%= claim.insuranceFaxNumber %>">

                    <label for="insuranceAddress">Insurance Address:</label>
                    <input type="text" id="insuranceAddress" name="insuranceAddress" value="<%= claim.insuranceAddress %>">

                    <label for="insurancePolicyNumber">Insurance Policy Number:</label>
                    <input type="text" id="insurancePolicyNumber" name="insurancePolicyNumber" value="<%= claim.insurancePolicyNumber %>">

                    <label for="insuranceClaimNumber">Insurance Claim Number:</label>
                    <input type="text" id="insuranceClaimNumber" name="insuranceClaimNumber" value="<%= claim.insuranceClaimNumber %>">

                    <label for="thirdPartyName">Third Party Name:</label>
                    <input type="text" id="thirdPartyName" name="thirdPartyName" value="<%= claim.thirdPartyName %>">

                    <label for="thirdPartyAddress">Third Party Address:</label>
                    <input type="text" id="thirdPartyAddress" name="thirdPartyAddress" value="<%= claim.thirdPartyAddress %>">

                    <label for="thirdPartyPhoneNumber">Third Party Phone Number:</label>
                    <input type="text" id="thirdPartyPhoneNumber" name="thirdPartyPhoneNumber" value="<%= claim.thirdPartyPhoneNumber %>">

                    <label for="thirdPartyInsuranceName">Third Party Insurance Name:</label>
                    <input type="text" id="thirdPartyInsuranceName" name="thirdPartyInsuranceName" value="<%= claim.thirdPartyInsuranceName %>">

                    <label for="thirdPartyAdjusterName">Third Party Adjuster Name:</label>
                    <input type="text" id="thirdPartyAdjusterName" name="thirdPartyAdjusterName" value="<%= claim.thirdPartyAdjusterName %>">

                    <label for="thirdPartyPolicyNumber">Third Party Policy Number:</label>
                    <input type="text" id="thirdPartyPolicyNumber" name="thirdPartyPolicyNumber" value="<%= claim.thirdPartyPolicyNumber %>">

                    <label for="thirdPartyClaimNumber">Third Party Claim Number:</label>
                    <input type="text" id="thirdPartyClaimNumber" name="thirdPartyClaimNumber" value="<%= claim.thirdPartyClaimNumber %>">

                    <label for="rentingLocation">Renting Location:</label>
                    <select id="rentingLocation" name="rentingLocation" required>
                        <option value="">Select Location</option>
                        <option value="LAS Airport" <%= claim.rentingLocation === 'LAS Airport' ? 'selected' : '' %>>LAS Airport</option>
                        <option value="Henderson Executive Airport" <%= claim.rentingLocation === 'Henderson Executive Airport' ? 'selected' : '' %>>Henderson Executive Airport</option>
                        <option value="Toyota Las Vegas" <%= claim.rentingLocation === 'Toyota Las Vegas' ? 'selected' : '' %>>Toyota Las Vegas</option>
                        <option value="Center Strip" <%= claim.rentingLocation === 'Center Strip' ? 'selected' : '' %>>Center Strip</option>
                        <option value="Losee" <%= claim.rentingLocation === 'Losee' ? 'selected' : '' %>>Losee</option>
                        <option value="Tropicana" <%= claim.rentingLocation === 'Tropicana' ? 'selected' : '' %>>Tropicana</option>
                        <option value="West Sahara" <%= claim.rentingLocation === 'West Sahara' ? 'selected' : '' %>>West Sahara</option>
                        <option value="Gibson" <%= claim.rentingLocation === 'Gibson' ? 'selected' : '' %>>Gibson</option>
                        <option value="Golden Nugget" <%= claim.rentingLocation === 'Golden Nugget' ? 'selected' : '' %>>Golden Nugget</option>
                    </select>

                    <label for="ldwAccepted">LDW Accepted:</label>
                    <select id="ldwAccepted" name="ldwAccepted">
                        <option value="true" <%= claim.ldwAccepted ? 'selected' : '' %>>Yes</option>
                        <option value="false" <%= !claim.ldwAccepted ? 'selected' : '' %>>No</option>
                    </select>

                    <label for="policeDepartment">Police Department:</label>
                    <input type="text" id="policeDepartment" name="policeDepartment" value="<%= claim.policeDepartment %>">

                    <label for="policeReportNumber">Police Report Number:</label>
                    <input type="text" id="policeReportNumber" name="policeReportNumber" value="<%= claim.policeReportNumber %>">

                    <label for="claimCloseDate">Claim Close Date:</label>
                    <input type="date" id="claimCloseDate" name="claimCloseDate" value="<%= claim.claimCloseDate ? new Date(claim.claimCloseDate).toISOString().split('T')[0] : '' %>">

                    <label for="vehicleOdometer">Vehicle Odometer:</label>
                    <input type="number" id="vehicleOdometer" name="vehicleOdometer" value="<%= claim.vehicleOdometer %>">

                    <label for="description">Description:</label>
                    <textarea id="description" name="description" class="responsive-textarea"><%= claim.description %></textarea>

                    <label for="damageType">Damage Type:</label>
                    <div class="checkbox-group">
                        <% const damageTypes = ['Heavy hit', 'Light hit', 'Mystery', 'Tire', 'Windsheild', 'Undercarraige', 'Mechanical', 'interior', 'Trunk', 'Gas/Tank', 'Roof', 'Driver Front Door', 'Driver Rear Door', 'Passenger Rear Door', 'Passenger Front Door', 'Left Rear Bumper', 'Right Rear Bumper', 'Rear Bumper', 'Left Front Bumper', 'Right Front Bumper', 'Front Bumper', 'Headlamp', 'Tail Light', 'Window', 'Left quarter Panel', 'Right Quarter Panel', 'Right Fender', 'Left Fender', 'Hood', 'Mirrors', 'Left Rocker', 'Right Rocker', 'Vandalism', 'Stolen', 'Totaled', 'Total - Flood', 'Total - Fire', 'Total - Hail', 'Total - Biohazard', 'Left Pillar', 'Right Pillar', 'Stolen - Recovered', 'Employee']; %>
                        <% damageTypes.forEach(type => { %>
                            <label>
                                <input type="checkbox" name="damageType" value="<%= type %>" <%= claim.damageType.includes(type) ? 'checked' : '' %>>
                                <%= type %>
                            </label>
                        <% }) %>
                    </div>

                    <label for="status">Status:</label>
                    <select id="status" name="status" required>
                        <option value="">Select Status</option>
                        <option value="Closed" <%= claim.status === 'Closed' ? 'selected' : '' %>>Closed</option>
                        <option value="Vince Pre-Sub" <%= claim.status === 'Vince Pre-Sub' ? 'selected' : '' %>>Vince Pre-Sub</option>
                        <option value="Vince Sub" <%= claim.status === 'Vince Sub' ? 'selected' : '' %>>Vince Sub</option>
                        <option value="Deonte Pre-Sub" <%= claim.status === 'Deonte Pre-Sub' ? 'selected' : '' %>>Deonte Pre-Sub</option>
                        <option value="Deonte Sub" <%= claim.status === 'Deonte Sub' ? 'selected' : '' %>>Deonte Sub</option>
                        <option value="Stef Claim" <%= claim.status === 'Stef Claim' ? 'selected' : '' %>>Stef Claim</option>
                        <option value="Bodyshop" <%= claim.status === 'Bodyshop' ? 'selected' : '' %>>Bodyshop</option>
                        <option value="LDW Discharge" <%= claim.status === 'LDW Discharge' ? 'selected' : '' %>>LDW Discharge</option>
                        <option value="Stef Pre-Litigation" <%= claim.status === 'Stef Pre-Litigation' ? 'selected' : '' %>>Stef Pre-Litigation</option>
                        <option value="Stef Litigation" <%= claim.status === 'Stef Litigation' ? 'selected' : '' %>>Stef Litigation</option>
                        <option value="Tina Pre-Litigation" <%= claim.status === 'Tina Pre-Litigation' ? 'selected' : '' %>>Tina Pre-Litigation</option>
                        <option value="Tina Litigation" <%= claim.status === 'Tina Litigation' ? 'selected' : '' %>>Tina Litigation</option>
                        <option value="Collections" <%= claim.status === 'Collections' ? 'selected' : '' %>>Collections</option>
                        <option value="Collections Review" <%= claim.status === 'Collections Review' ? 'selected' : '' %>>Collections Review</option>
                    </select>
                </div>

                <!-- File upload sections -->
                <div class="file-section">
                    <h3>Incident Reports</h3>
                    <input type="file" id="incidentReports" name="incidentReports" multiple>
                </div>

                <div class="file-section">
                    <h3>Correspondence</h3>
                    <input type="file" id="correspondence" name="correspondence" multiple>
                </div>

                <div class="file-section">
                    <h3>Rental Agreement</h3>
                    <input type="file" id="rentalAgreement" name="rentalAgreement" multiple>
                </div>

                <div class="file-section">
                    <h3>Police Report</h3>
                    <input type="file" id="policeReport" name="policeReport" multiple>
                </div>

                <div class="file-section">
                    <h3>Invoices</h3>
                    <input type="file" id="invoices" name="invoices" multiple>
                </div>

                <div class="file-section">
                    <h3>Photos</h3>
                    <input type="file" id="photos" name="photos" multiple>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn">Update Claim</button>
                    <a href="/claims/<%= claim._id %>" class="btn">Cancel</a>
                </div>
            </form>
        </div>
    </main>
</body>
</html>
